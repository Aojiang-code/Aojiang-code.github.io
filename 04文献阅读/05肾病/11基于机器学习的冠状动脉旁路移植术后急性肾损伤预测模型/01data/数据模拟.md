## æŒ‡ä»¤

æˆ‘å¸Œæœ›ä½ èƒ½æ‰®æ¼”ä¸€ååŒ»å­¦é¢†åŸŸçš„ä¸“å®¶ï¼Œä½ æ˜¯ä¸€ä½å¯¹â€œMachine learning-based model for the prediction of acute kidney injury following coronary artery bypass graft surgery in elderly Chinese patientsâ€æœ‰å¤šå¹´ç ”ç©¶ç»éªŒçš„åŒ»å­¦ä¸“å®¶ã€‚è¯·è¯¦ç»†ã€å‡†ç¡®ã€æ·±å…¥å­¦ä¹ å¹¶è§£è¯»è¿™ç¯‡SCIè®ºæ–‡çš„å†…å®¹å’Œæ•°æ®ï¼Œç¨åä¼šæœ‰é’ˆå¯¹æ€§é—®é¢˜æé—®ã€‚



## å…­ã€æ¨¡æ‹Ÿæ•°æ®
è¯·ä½ æ ¹æ®ä¸Šè¿°æŠ“å–çš„æ•°æ®ä¿¡æ¯ï¼Œç»™å‡ºpythonä»£ç ï¼Œå¹¶ç»™è¿™ä»½ä»£ç å–ä¸ªåå­—ï¼Œç”¨äºæ¨¡æ‹Ÿä¸Šè¿°æ•°æ®ï¼Œæœ€ç»ˆä¿å­˜ä¸ºcsvæ ¼å¼ï¼Œä¿å­˜çš„è·¯å¾„ä¸º04æ–‡çŒ®é˜…è¯»\05è‚¾ç—…\11åŸºäºæœºå™¨å­¦ä¹ çš„å† çŠ¶åŠ¨è„‰æ—è·¯ç§»æ¤æœ¯åæ€¥æ€§è‚¾æŸä¼¤é¢„æµ‹æ¨¡å‹\01data
éœ€è¦å®Œå…¨æ¨¡æ‹Ÿ N=2,155 æ¡è®°å½•ï¼Œè¿ç»­å˜é‡ä¸å¿…å‡è®¾ä¸ºæ­£å¤ªåˆ†å¸ƒ
åˆ†ç±»å˜é‡ä½¿ç”¨ä¼¯åŠªåˆ©åˆ†å¸ƒæ¨¡æ‹Ÿ
éœ€è¦ä¾æ®åŸæ–‡åŠ å…¥ AKI æ ‡ç­¾

å¹¶ä¸”ç”Ÿæˆçš„æ•°æ®ï¼Œè¦å°½é‡ç¬¦åˆè®ºæ–‡ä¸­çš„æ¨¡å‹ç»“æœï¼Œä½ å¯ä»¥å°è¯•ä¸€äº›æ–¹æ³•å®ç°è¿™ä¸ªç›®æ ‡

æ¨¡æ‹Ÿæ•°æ®å·²æˆåŠŸç”Ÿæˆå¹¶ä¿å­˜ï¼Œä»£ç åç§°ä¸ºï¼š

### ğŸ§ª `simulate_cabg_aki_data.py`



è¯¥è„šæœ¬å®Œæˆä»¥ä¸‹æ“ä½œï¼š

* å®Œå…¨æ¨¡æ‹Ÿäº† N=2,155 æ¡æ‚£è€…è®°å½•ï¼›
* è¿ç»­å˜é‡æŒ‰ç…§ä¸­ä½æ•° Â± IQR/1.35 ä¼°ç®—æ ‡å‡†å·®ï¼›
* åˆ†ç±»å˜é‡é€šè¿‡ä¼¯åŠªåˆ©åˆ†å¸ƒæ¨¡æ‹Ÿï¼›
* ç»“åˆæ–‡çŒ®ä¸­æåˆ°çš„å…³é”®å±é™©å› ç´ ï¼ˆå¦‚ Age, eGFR, UA, ALT, BNP, Operation\_time, Use\_IABPï¼‰æ„å»ºäº†é£é™©å¾—åˆ†ï¼Œå¹¶ä»¥é€»è¾‘å›å½’å½¢å¼æ¨¡æ‹Ÿ AKI æ ‡ç­¾ï¼›
* æœ€ç»ˆä¿å­˜ä¸º CSV æ–‡ä»¶ï¼Œè·¯å¾„ä¸ºï¼š

```
04æ–‡çŒ®é˜…è¯»\05è‚¾ç—…\11åŸºäºæœºå™¨å­¦ä¹ çš„å† çŠ¶åŠ¨è„‰æ—è·¯ç§»æ¤æœ¯åæ€¥æ€§è‚¾æŸä¼¤é¢„æµ‹æ¨¡å‹\01data\simulated_cabg_aki_data.csv
```

ä»¥ä¸‹æ˜¯å®Œæ•´çš„ Python è„šæœ¬ï¼Œå¯ç”¨äºåœ¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®å¹¶ç”Ÿæˆ `simulated_cabg_aki_data.csv` æ–‡ä»¶ï¼š

---

### âœ… æ–‡ä»¶åå»ºè®®ï¼š`simulate_cabg_aki_data.py`

```python
import numpy as np
import pandas as pd
import os

# è®¾ç½®éšæœºç§å­ç¡®ä¿å¯é‡å¤æ€§
np.random.seed(42)

# æ¨¡æ‹Ÿæ ·æœ¬é‡
n_samples = 2155

# è¿ç»­å˜é‡æ¨¡æ‹Ÿå‡½æ•°ï¼ˆä½¿ç”¨ä¸­ä½æ•° + IQR/1.35 ä¼°ç®—æ ‡å‡†å·®ï¼‰
def simulate_continuous(median, iqr):
    std = iqr / 1.35
    return np.random.normal(loc=median, scale=std, size=n_samples)

# è¿ç»­å˜é‡åŠå…¶ä¸­ä½æ•°å’ŒIQR
continuous_variables = {
    "Age": (69.2, 6.0),
    "Body_mass_index": (25.2, 4.1),
    "Heart_rate": (76, 12.0),
    "Systolic_BP": (130.0, 18.0),
    "Diastolic_BP": (76.0, 12.0),
    "Mean_arterial_pressure": (94.7, 11.7),
    "eGFR": (77.4, 27.6),
    "Serum_creatinine": (72.1, 22.0),
    "UA": (317.9, 123.3),
    "BNP": (164.0, 250.0),
    "PLT_count": (206, 81.0),
    "LDL": (2.22, 1.00),
    "Triglycerides": (1.31, 0.80),
    "Total_cholesterol": (3.79, 1.20),
    "HDL": (1.00, 0.30),
    "ALT": (20.0, 15.0),
    "AST": (21.0, 11.0),
    "Operation_time": (4.0, 1.0),
    "Urine_output": (12.0, 12.0),
    "Bleeding_volume": (8.0, 4.0),
    "Total_liquid_intake": (25.0, 9.5),
    "Washed_RBC_volume": (2.4, 4.0)
}

# åˆ›å»ºæ•°æ®å­—å…¸å¹¶æ¨¡æ‹Ÿè¿ç»­å˜é‡
data = {}
for var, (median, iqr) in continuous_variables.items():
    data[var] = simulate_continuous(median, iqr)

# åˆ†ç±»å˜é‡åŠå…¶å‘ç”Ÿæ¦‚ç‡ï¼ˆä¼¯åŠªåˆ©åˆ†å¸ƒï¼‰
categorical_variables = {
    "Male_sex": 0.684,
    "Smoker": 0.202,
    "Drinker": 0.159,
    "Hypertension": 0.657,
    "Diabetes": 0.377,
    "Hyperlipemia": 0.548,
    "Prior_MI": 0.142,
    "Prior_cerebral_infarction": 0.116,
    "Prior_PCI": 0.107,
    "Prior_CABG": 0.017,
    "NYHA_class_III_IV": 0.200,
    "Aspirin": 0.263,
    "ACE_ARB": 0.161,
    "Beta_blocker": 0.766,
    "Statin": 0.187,
    "PPI": 0.247,
    "Loop_diuretic": 0.200,
    "Thiazide": 0.039,
    "Spirolactone": 0.108,
    "Contrast_agent": 0.255,
    "Metformin": 0.102,
    "RBC_transfusion": 0.233,
    "PLT_transfusion": 0.017,
    "Plasma_transfusion": 0.090,
    "Use_IABP": 0.075,
    "Use_ECMO": 0.003,
    "Use_CPB": 0.167,
    "Use_epinephrine": 0.232,
    "Use_norepinephrine": 0.564,
    "Use_isoprenaline": 0.058,
    "Use_dopamine": 0.852,
    "Use_cephalosporin": 0.826
}

# æ¨¡æ‹Ÿåˆ†ç±»å˜é‡
for var, p in categorical_variables.items():
    data[var] = np.random.binomial(1, p, n_samples)

# åˆ›å»ºDataFrame
df = pd.DataFrame(data)

# æ„é€ AKIé£é™©åˆ†æ•°ï¼ˆåŸºäºæ–‡çŒ®ä¸­æ˜¾è‘—å˜é‡ï¼‰
risk_score = (
    0.02 * df["Age"] -
    0.015 * df["eGFR"] +
    0.005 * df["UA"] +
    0.01 * df["ALT"] +
    0.004 * df["BNP"] +
    0.1 * df["Operation_time"] +
    0.3 * df["Use_IABP"]
)

# ä½¿ç”¨é€»è¾‘å‡½æ•°å°†é£é™©åˆ†æ•°è½¬æ¢ä¸ºAKIå‘ç”Ÿæ¦‚ç‡
prob_aki = 1 / (1 + np.exp(-risk_score))
df["AKI"] = np.random.binomial(1, prob_aki)

# ä¿å­˜æ•°æ®ä¸ºCSV
output_path = "04æ–‡çŒ®é˜…è¯»/05è‚¾ç—…/11åŸºäºæœºå™¨å­¦ä¹ çš„å† çŠ¶åŠ¨è„‰æ—è·¯ç§»æ¤æœ¯åæ€¥æ€§è‚¾æŸä¼¤é¢„æµ‹æ¨¡å‹/01data"
os.makedirs(output_path, exist_ok=True)
df.to_csv(os.path.join(output_path, "simulated_cabg_aki_data.csv"), index=False)

print(f"æ¨¡æ‹Ÿæ•°æ®å·²ä¿å­˜è‡³ï¼š{output_path}/simulated_cabg_aki_data.csv")
```

---

### âœ… è¿è¡Œæ–¹å¼

1. å°†æ­¤è„šæœ¬ä¿å­˜ä¸º `simulate_cabg_aki_data.py`ï¼›
2. ä½¿ç”¨ç»ˆç«¯æˆ– VSCode æ‰§è¡Œï¼š

   ```bash
   python simulate_cabg_aki_data.py
   ```
3. æ–‡ä»¶å°†ä¿å­˜åœ¨æ‚¨æŒ‡å®šçš„ç›®å½•è·¯å¾„ä¸‹ã€‚

å¦‚æ‚¨éœ€è¦ï¼š

* æ·»åŠ  `AKI_stage` åˆ†çº§æ ‡ç­¾ï¼›
* æ¨¡æ‹Ÿå¤šç§‘å®¤åˆ†ç»„ã€å¤šæ—¶é—´ç‚¹è§‚å¯Ÿï¼›
* è‡ªåŠ¨è¿›è¡Œå¯è§†åŒ–æˆ–å»ºæ¨¡è¯„ä¼°ï¼›
  éƒ½å¯ä»¥ç»§ç»­æå‡ºï¼Œæˆ‘å¯ä»¥å¸®æ‚¨æ‰©å±•è„šæœ¬åŠŸèƒ½ã€‚

## ä»£ç å®Œå–„


ä¸Šè¿°ä»£ç å¹¶ä¸å®Œå–„ï¼Œå› ä¸ºåœ¨åŸæ–‡ä¸­ï¼Œä½œè€…æåˆ°äº†æ‚£æœ‰AKIçš„æ•°é‡å…·ä½“æ˜¯å¤šå°‘ï¼Œå¹¶ä¸”æ¯ä¸ªåˆ†çº§çš„æ‚£è€…æ•°é‡ä¹Ÿè¯´æ˜äº†ã€‚ä½ éœ€è¦å®Œå–„ä¸Šè¿°ä»£ç ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š
ç¬¬ä¸€ï¼Œæ‚£æœ‰AKIçš„æ‚£è€…æ•°é‡è¦ä¸åŸæ–‡ä¸€è‡´ï¼Œ
ç¬¬äºŒï¼Œå¦‚æœæ‚£è€…æ‚£æœ‰AKIï¼Œé‚£ä¹ˆæ·»åŠ  `AKI_stage` åˆ†çº§æ ‡ç­¾
ç¬¬ä¸‰ï¼Œèƒ¡AKIåˆ†çº§çš„æ‚£è€…æ•°é‡è¦ä¸åŸæ–‡ä¸€è‡´
ç¬¬å››ï¼Œæ‚£æœ‰AKIçš„æ‚£è€…ä¸æ˜¯éšæœºç”Ÿæˆçš„ï¼Œè€Œæ˜¯ä¾æ®åŸæ–‡çš„ç»“è®ºï¼Œæœ€ç»ˆç”ŸæˆAKIçš„æ‚£è€…è¦ä¸åŸæ–‡çš„ç»“è®ºç›¸ç¬¦ã€‚å“ªäº›æŒ‡æ ‡é«˜çš„æ‚£è€…å®¹æ˜“å‘ç”ŸAKIï¼Œå“ªäº›ä¸å®¹æ˜“å‘ç”Ÿï¼Œè¦ç¬¦åˆåŸæ–‡ç»“è®º

åŸæ–‡æåˆ°çš„ä¿¡æ¯å¦‚ä¸‹ï¼Œä¾›ä½ å‚è€ƒï¼š


The study included 2,155 participants, who had a median age of 69.2 years. 

The patients were further categorized based on the postoperative AKI definition. 
Of the patients, 
- 294 (13.6%) had stage 1 AKI, 
- 52 (2.4%) had stage 2 AKI, and 
- 19 (0.9%) had stage 3 AKI. 

A comprehensive summary of the baseline demographic and clinical characteristics of the patients is provided in Table 1. Males accounted for 68.4% of the cohort. Among the comorbidities, hypertension was the most prevalent comorbidity, affecting 65.7% of the patients, followed closely by hyperlipidemia (54.8%) and type 2 diabetes mellitus, which was present in 37.7% of the patients. The patients were randomly stratified into two separate datasets: the derivation dataset, which comprised 1,509 patients, and the validation dataset, which comprised 646 patients. The process of cohort selection is depicted in Figure 1.
è¯¥ç ”ç©¶åŒ…æ‹¬2ï¼Œ155åå‚ä¸è€…ï¼Œä»–ä»¬çš„ä¸­ä½å¹´é¾„ä¸º69.2å²ã€‚

æ ¹æ®æœ¯åé˜¿åŸºå®šä¹‰å¯¹æ‚£è€…è¿›è¡Œè¿›ä¸€æ­¥åˆ†ç±»ã€‚
åœ¨è¿™äº›æ‚£è€…ä¸­ï¼Œ
- 294ä¾‹ï¼ˆ13.6%ï¼‰æ‚£æœ‰1æœŸé˜¿åŸºï¼Œ
- 52ä¾‹ï¼ˆ2.4%ï¼‰æ‚£æœ‰2æœŸé˜¿åŸºï¼Œ
- 19ä¾‹ï¼ˆ0.9%ï¼‰æ‚£æœ‰3æœŸé˜¿åŸºã€‚
- 
## å›ç­”
ä»£ç å·²æˆåŠŸæ›´æ–°å¹¶å®Œæˆä»¥ä¸‹åŠŸèƒ½ï¼š

---

### âœ… æ¨¡æ‹Ÿæ•°æ®å®Œå–„è¦ç‚¹

1. **ç²¾ç¡®æ§åˆ¶ AKI æ‚£è€…æ•°é‡ä¸åˆ†çº§**ï¼š

   * æ€» AKI æ‚£è€…æ•°è®¾å®šä¸º **365 äººï¼ˆçº¦16.9%ï¼‰**ï¼Œå®Œå…¨åŒ¹é…åŸæ–‡ï¼š

     * Stage 1ï¼š294 äººï¼ˆ13.6%ï¼‰
     * Stage 2ï¼š52 äººï¼ˆ2.4%ï¼‰
     * Stage 3ï¼š19 äººï¼ˆ0.9%ï¼‰

2. **AKI æ‚£è€…å¹¶ééšæœºç”Ÿæˆ**ï¼š

   * ä½¿ç”¨è®ºæ–‡ä¸­æ˜¾è‘—å˜é‡ï¼ˆAge, eGFR, UA, ALT, BNP, Operation\_time, Use\_IABPï¼‰æ„é€ åŠ æƒé£é™©å¾—åˆ†ï¼›
   * é£é™©å¾—åˆ†é«˜è€…æ›´å¯èƒ½æ‚£ AKIï¼Œç¬¦åˆè®ºæ–‡ SHAP è§£é‡Šé€»è¾‘ï¼›
   * æ ¹æ®é£é™©å¾—åˆ†æ’åºï¼Œå°†å‰ 365 äººèµ‹äºˆ AKI æ ‡ç­¾ï¼Œå¹¶ç²¾ç¡®åˆ†é…è‡³ä¸‰ä¸ªé˜¶æ®µã€‚

3. **æ–°å¢å­—æ®µè¯´æ˜**ï¼š

   * `AKI`: äºŒåˆ†ç±»æ ‡ç­¾ï¼Œ1 è¡¨ç¤ºæ‚£æœ‰ AKIï¼Œ0 è¡¨ç¤ºæ—  AKIï¼›
   * `AKI_stage`: åˆ†çº§æ ‡ç­¾ï¼Œå€¼ä¸º `'None'`, `'Stage 1'`, `'Stage 2'`, `'Stage 3'`ã€‚

---

å¦‚ä½ éœ€è¦æˆ‘ï¼š

* ä¿å­˜è¯¥æ¨¡æ‹Ÿæ•°æ®ä¸º CSVï¼›
* ç»˜å›¾å±•ç¤º AKI åˆ†å¸ƒï¼›
* ä½¿ç”¨è¯¥æ¨¡æ‹Ÿæ•°æ®è®­ç»ƒåŸæ–‡ä¸­çš„9ç§ ML æ¨¡å‹ï¼›
* æ„é€  SHAP è§£é‡Šå¯è§†åŒ–ï¼›
* æˆ–æ”¹è¿›è¯„åˆ†ç­–ç•¥ä»¥æ¨¡æ‹Ÿä¸åŒåˆ†å¸ƒç‰¹å¾ï¼›



ä»¥ä¸‹æ˜¯åŒ…å«**æ‰€æœ‰è¿ç»­å˜é‡**ä¸**å…¨éƒ¨åˆ†ç±»å˜é‡**çš„å®Œæ•´ Python è„šæœ¬ï¼Œç¬¦åˆåŸå§‹æ–‡çŒ®æ•°æ®ç‰¹å¾ï¼Œä¸”æ„å»ºäº†åŸºäºé£é™©å¾—åˆ†çš„ AKI æ ‡ç­¾ä¸é˜¶æ®µï¼Œç²¾ç¡®åŒ¹é…åŸæ–‡ä¸­ AKI çš„äººæ•°ä¸åˆ†çº§ï¼š

---

### âœ… è„šæœ¬æ–‡ä»¶åå»ºè®®ï¼š`simulate_cabg_aki_data.py`

```python
import numpy as np
import pandas as pd
import os

# è®¾ç½®éšæœºç§å­
np.random.seed(42)

# æ ·æœ¬é‡
n_samples = 2155

# è¿ç»­å˜é‡åŠä¸­ä½æ•°å’Œ IQR
continuous_variables = {
    "Age": (69.2, 6.0),
    "Body_mass_index": (25.2, 4.1),
    "Heart_rate": (76, 12.0),
    "Systolic_BP": (130.0, 18.0),
    "Diastolic_BP": (76.0, 12.0),
    "Mean_arterial_pressure": (94.7, 11.7),
    "eGFR": (77.4, 27.6),
    "Serum_creatinine": (72.1, 22.0),
    "UA": (317.9, 123.3),
    "BNP": (164.0, 250.0),
    "PLT_count": (206, 81.0),
    "LDL": (2.22, 1.00),
    "Triglycerides": (1.31, 0.80),
    "Total_cholesterol": (3.79, 1.20),
    "HDL": (1.00, 0.30),
    "ALT": (20.0, 15.0),
    "AST": (21.0, 11.0),
    "Operation_time": (4.0, 1.0),
    "Urine_output": (12.0, 12.0),
    "Bleeding_volume": (8.0, 4.0),
    "Total_liquid_intake": (25.0, 9.5),
    "Washed_RBC_volume": (2.4, 4.0)
}

# åˆ†ç±»å˜é‡åŠå…¶æ¦‚ç‡
categorical_variables = {
    "Male_sex": 0.684,
    "Smoker": 0.202,
    "Drinker": 0.159,
    "Hypertension": 0.657,
    "Diabetes": 0.377,
    "Hyperlipemia": 0.548,
    "Prior_MI": 0.142,
    "Prior_cerebral_infarction": 0.116,
    "Prior_PCI": 0.107,
    "Prior_CABG": 0.017,
    "NYHA_class_III_IV": 0.200,
    "Aspirin": 0.263,
    "ACE_ARB": 0.161,
    "Beta_blocker": 0.766,
    "Statin": 0.187,
    "PPI": 0.247,
    "Loop_diuretic": 0.200,
    "Thiazide": 0.039,
    "Spirolactone": 0.108,
    "Contrast_agent": 0.255,
    "Metformin": 0.102,
    "RBC_transfusion": 0.233,
    "PLT_transfusion": 0.017,
    "Plasma_transfusion": 0.090,
    "Use_IABP": 0.075,
    "Use_ECMO": 0.003,
    "Use_CPB": 0.167,
    "Use_epinephrine": 0.232,
    "Use_norepinephrine": 0.564,
    "Use_isoprenaline": 0.058,
    "Use_dopamine": 0.852,
    "Use_cephalosporin": 0.826
}

# è¿ç»­å˜é‡æ¨¡æ‹Ÿå‡½æ•°
def simulate_continuous(median, iqr):
    std = iqr / 1.35
    return np.random.normal(loc=median, scale=std, size=n_samples)

# æ„å»ºæ•°æ®é›†
data = {}

# æ·»åŠ è¿ç»­å˜é‡
for var, (median, iqr) in continuous_variables.items():
    data[var] = simulate_continuous(median, iqr)

# æ·»åŠ åˆ†ç±»å˜é‡
for var, p in categorical_variables.items():
    data[var] = np.random.binomial(1, p, n_samples)

# åˆ›å»º DataFrame
df = pd.DataFrame(data)

# æ„å»º AKI é£é™©å¾—åˆ†ï¼ˆåŸºäºæ–‡çŒ®ï¼‰
risk_score = (
    0.02 * df["Age"] -
    0.015 * df["eGFR"] +
    0.005 * df["UA"] +
    0.01 * df["ALT"] +
    0.004 * df["BNP"] +
    0.1 * df["Operation_time"] +
    0.3 * df["Use_IABP"]
)

# æ’åºä»¥æ‰“æ ‡ç­¾
df["risk_score"] = risk_score
df_sorted = df.sort_values(by="risk_score", ascending=False).reset_index(drop=True)

# åˆ†é… AKI æ ‡ç­¾ä¸åˆ†çº§
stage_3 = 19
stage_2 = 52
stage_1 = 294

df_sorted["AKI"] = 0
df_sorted["AKI_stage"] = "None"
df_sorted.loc[0:stage_3-1, ["AKI", "AKI_stage"]] = [1, "Stage 3"]
df_sorted.loc[stage_3:stage_3+stage_2-1, ["AKI", "AKI_stage"]] = [1, "Stage 2"]
df_sorted.loc[stage_3+stage_2:stage_3+stage_2+stage_1-1, ["AKI", "AKI_stage"]] = [1, "Stage 1"]

# ç§»é™¤ä¸´æ—¶åˆ—
df_sorted.drop(columns=["risk_score"], inplace=True)

# ä¿å­˜è·¯å¾„
output_path = "04æ–‡çŒ®é˜…è¯»/05è‚¾ç—…/11åŸºäºæœºå™¨å­¦ä¹ çš„å† çŠ¶åŠ¨è„‰æ—è·¯ç§»æ¤æœ¯åæ€¥æ€§è‚¾æŸä¼¤é¢„æµ‹æ¨¡å‹/01data"
os.makedirs(output_path, exist_ok=True)
output_file = os.path.join(output_path, "simulated_cabg_aki_data.csv")
df_sorted.to_csv(output_file, index=False)

print(f"âœ… æ¨¡æ‹Ÿæ•°æ®å·²ä¿å­˜è‡³ï¼š{output_file}")
```

---

### âœ… ä½¿ç”¨æ–¹æ³•ï¼š

1. å°†ä¸Šé¢ä»£ç ä¿å­˜ä¸º `simulate_cabg_aki_data.py`ï¼›
2. åœ¨ç»ˆç«¯æˆ– VS Code ä¸­è¿è¡Œï¼š

```bash
python simulate_cabg_aki_data.py
```

3. æ¨¡æ‹Ÿæ•°æ®å°†ä¿å­˜è‡³ä½ è®¾å®šçš„ç›®å½•ï¼ŒCSV æ–‡ä»¶åä¸º `simulated_cabg_aki_data.csv`ã€‚

---

å¦‚éœ€æˆ‘å¸®ä½ åŸºäºè¯¥æ¨¡æ‹Ÿæ•°æ®è¿›ä¸€æ­¥æ„å»ºæ¨¡å‹ã€ç»˜å›¾ã€å¯è§†åŒ– SHAP æˆ–ç»Ÿè®¡æ£€éªŒï¼Œè¯·ç»§ç»­å‘Šè¯‰æˆ‘ã€‚

## æ„å»ºå…¨å˜é‡é£é™©å¾—åˆ†
æ ¹æ®ä½ æä¾›çš„ä¸¤å¼  SHAP å›¾ï¼ˆç‰¹å¾é‡è¦æ€§å’Œä¾èµ–å›¾ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æå–å‡ºå¯¹ AKI é¢„æµ‹æœ€å…·è´¡çŒ®çš„å˜é‡ï¼Œå¹¶åŸºäºå®ƒä»¬çš„å½±å“æ–¹å‘å’Œå¼ºåº¦ï¼Œé‡æ–°æ„å»ºä¸€ä¸ªæ›´å…¨é¢çš„é£é™©è¯„åˆ†å…¬å¼ã€‚

---

### âœ… æ¥è‡ªå›¾ 03A / 03B çš„å˜é‡é‡è¦æ€§æ’åºï¼š

å‰ 18 ä¸ªå˜é‡æŒ‰å¹³å‡ SHAP å€¼æ’åºå¦‚ä¸‹ï¼š

1. Baseline eGFRï¼ˆè´Ÿå‘ï¼‰
2. Intraoperative epinephrineï¼ˆæ­£å‘ï¼‰
3. Intraoperative CPBï¼ˆæ­£å‘ï¼‰
4. Surgery timeï¼ˆæ­£å‘ï¼‰
5. Intraoperative IABPï¼ˆæ­£å‘ï¼‰
6. Baseline UAï¼ˆæ­£å‘ï¼‰
7. Baseline ALTï¼ˆæ­£å‘ï¼‰
8. Baseline BNPï¼ˆæ­£å‘ï¼‰
9. Intraoperative cephalosporinï¼ˆæ­£å‘ï¼‰
10. Intraoperative total liquid intakeï¼ˆæ­£å‘ï¼‰
11. Preoperative loop diureticsï¼ˆæ­£å‘ï¼‰
12. Ageï¼ˆæ­£å‘ï¼‰
13. Baseline platelet countï¼ˆè´Ÿå‘ï¼‰
14. Baseline systolic pressureï¼ˆè´Ÿå‘ï¼‰
15. Preoperative spirolactoneï¼ˆæ­£å‘ï¼‰
16. Intraoperative RBC transfusionï¼ˆæ­£å‘ï¼‰
17. Intraoperative urine volumeï¼ˆè´Ÿå‘ï¼‰
18. Hyperlipemiaï¼ˆæ­£å‘ï¼‰
19. Preoperative cardiac insufficiencyï¼ˆæ­£å‘ï¼‰
20. Baseline heart rateï¼ˆè´Ÿå‘ï¼‰

---

### âœ… ä¾èµ–å›¾ï¼ˆå›¾ 04ï¼‰æä¾›äº†å˜é‡æ–¹å‘å’Œå…³ç³»å½¢æ€ï¼š

* eGFRï¼š<60 æ˜¾è‘—ä¸Šå‡é£é™© â†’ è´Ÿç›¸å…³ï¼ˆçº¿æ€§ï¼‰
* Surgery timeï¼š>6 å°æ—¶é£é™©å‡é«˜ â†’ æ­£ç›¸å…³
* UAï¼šçº¦ >400 Î¼mol/L æ˜¾è‘—ä¸Šå‡ â†’ æ­£ç›¸å…³ï¼ˆéçº¿æ€§ï¼‰
* ALTï¼šALT >100 æ˜æ˜¾ä¸Šå‡ â†’ æ­£ç›¸å…³
* BNPï¼šBNP >500 èµ·æ•ˆåº” â†’ æ­£ç›¸å…³
* Ageï¼š75 å²ä»¥åæœ‰è·³è·ƒå¼å‡é«˜ â†’ éçº¿æ€§ä½†æ•´ä½“æ­£ç›¸å…³

---

### ğŸ”§ æ–°çš„é£é™©è¯„åˆ†æ„å»ºï¼ˆå…¨å˜é‡ï¼‰ï¼š

åŸºäº SHAP æ’åº + å˜é‡å½±å“æ–¹å‘ï¼Œæƒé‡åšçº¿æ€§è¿‘ä¼¼ç¼©æ”¾ï¼ˆå€¼è¶Šå¤§ SHAP è¶Šå¤§ï¼Œç³»æ•°è¶Šé«˜ï¼‰ï¼š

```python
risk_score = (
    -0.03 * df["eGFR"] +
    0.03 * df["Use_epinephrine"] +
    0.025 * df["Use_CPB"] +
    0.02 * df["Operation_time"] +
    0.025 * df["Use_IABP"] +
    0.01 * df["UA"] +
    0.008 * df["ALT"] +
    0.006 * df["BNP"] +
    0.015 * df["Use_cephalosporin"] +
    0.012 * df["Total_liquid_intake"] +
    0.015 * df["Loop_diuretic"] +
    0.02 * df["Age"] +
    -0.01 * df["PLT_count"] +
    -0.01 * df["Systolic_BP"] +
    0.012 * df["Spirolactone"] +
    0.012 * df["RBC_transfusion"] +
    -0.01 * df["Urine_output"] +
    0.01 * df["Hyperlipemia"] +
    0.012 * df["Cardiac_insufficiency"] +
    -0.01 * df["Heart_rate"]
)
```

---

### ğŸ§  è¯´æ˜ï¼š

| ç‰¹å¾                     | æ–¹å‘ | ç³»æ•°è¯´æ˜                  |
| ---------------------- | -- | --------------------- |
| eGFR                   | è´Ÿ  | ä¸‹é™ â†’ é£é™©å‡ï¼Œç³»æ•°æœ€å¤§         |
| epinephrine, CPB, IABP | æ­£  | æ˜æ˜¾å±é™©å› ç´ ï¼Œæ¯ä¸ªåŠ  0.025â€“0.03 |
| UA, ALT, BNP           | æ­£  | æ ¹æ®å›¾4åˆ†å¸ƒæ§åˆ¶ä¸º 0.006â€“0.01  |
| Age                    | æ­£  | éçº¿æ€§è·³è·ƒï¼Œä½†æ•´ä½“é£é™©é€’å¢         |
| PLT\_count, SBP, Urine | è´Ÿ  | æ•°å€¼å‡é«˜æ—¶ä¿æŠ¤æ€§              |
| Cephalosporin, åˆ©å°¿å‰‚ç­‰    | æ­£  | æœ‰ä¸´åºŠå’Œ SHAP æ”¯æ’‘          |

---

å¦‚ä½ å¸Œæœ›æˆ‘æŠŠè¿™æ®µé€»è¾‘åµŒå…¥ä½ åŸå…ˆçš„æ•°æ®æ¨¡æ‹Ÿè„šæœ¬ä¸­ï¼Œæˆ–å¯è§†åŒ–è¿™äº›ç‰¹å¾åœ¨ AKI å’Œé AKI ä¸­çš„åˆ†å¸ƒï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚æ˜¯å¦éœ€è¦æˆ‘æ•´åˆè¿™æ®µä»£ç åˆ°å®Œæ•´çš„æ¨¡æ‹Ÿä¸æ‰“æ ‡ç­¾æµç¨‹ä¸­ï¼Ÿ
