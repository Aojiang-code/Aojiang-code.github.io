ä»¥ä¸‹æ˜¯å®Œæ•´ã€ä¿®æ­£åçš„ **ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ä¸ PyHealth æ¶æ„ç†è§£** çš„å®æ“å­¦ä¹ è®¡åˆ’ï¼Œç¡®ä¿ä½ åœ¨æœ¬åœ°æˆåŠŸè¿è¡Œ PyHealth å¹¶ç†è§£å…¶å†…éƒ¨æœºåˆ¶ï¼Œé€‚é…æœ€æ–° PyHealth ä»“åº“å†…å®¹ï¼š

---

# âœ… ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡ä¸ PyHealth æ¶æ„ç†è§£

---

## ğŸ¯ é˜¶æ®µç›®æ ‡

1. æˆåŠŸå®‰è£… PyHealth åŠä¾èµ–ï¼›
2. è·‘é€šå®˜æ–¹ `examples` ä¸­çš„è‡³å°‘ä¸€ä¸ªè„šæœ¬ï¼ˆå¦‚ GRU-D æ­»äº¡é¢„æµ‹ï¼‰ï¼›
3. ç†Ÿæ‚‰ PyHealth çš„æ•´ä½“æ¨¡å—æ¶æ„ï¼›
4. èƒ½å¤Ÿè¯»å– Synthetic MIMIC æ•°æ®å¹¶åˆæ­¥æ£€æŸ¥ç—…äººã€äº‹ä»¶ã€å°±è¯Šè®°å½•ã€‚

---

## â± æ¨èç”¨æ—¶ï¼š1 å¤©

---

## ğŸ“¦ 1.1 å®‰è£…ä¸åŸºç¡€é…ç½®

### æ¨è Conda å®‰è£…æ­¥éª¤ï¼ˆæ”¯æŒ GPUï¼‰

```bash
# åˆ›å»º Python ç¯å¢ƒ
conda create -n pyhealth_env python=3.9 -y
conda activate pyhealth_env

# å®‰è£… PyTorchï¼ˆå¯æ ¹æ® GPU æƒ…å†µé€‰æ‹©ç‰ˆæœ¬ï¼‰
# GPU ç”¨æˆ·æ¨èå¦‚ä¸‹å‘½ä»¤ï¼ˆç¤ºä¾‹ä¸º CUDA 11.8ï¼‰
conda install pytorch torchvision torchaudio pytorch-cuda=11.8 -c pytorch -c nvidia

# CPU ç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨ï¼š
# conda install pytorch torchvision torchaudio cpuonly -c pytorch

# å®‰è£… PyHealth åŠä¾èµ–
pip install pyhealth
pip install scikit-learn pandas tqdm networkx rdkit
```

ğŸ“Œ éªŒè¯å®‰è£…æˆåŠŸï¼š

```bash
python -c "import pyhealth; print(pyhealth.__version__)"
```

---

## ğŸ§  1.2 PyHealth æ¶æ„æ ¸å¿ƒæ¨¡å—ç†è§£

| æ¨¡å—åç§°       | ä¸»è¦åŠŸèƒ½                                            | ç¤ºä¾‹                       |
| ---------- | ----------------------------------------------- | ------------------------ |
| `datasets` | æ”¯æŒåŸå§‹ EHRï¼ˆå¦‚ MIMICï¼‰è§£æä¸ºç»Ÿä¸€ç»“æ„ï¼ˆPatient, Visit, Eventï¼‰ | `MIMIC3Dataset`          |
| `tasks`    | å®šä¹‰é¢„æµ‹ç›®æ ‡ï¼ˆåˆ†ç±»ã€å›å½’ã€æ—¶é—´çª—ï¼‰                               | `BinaryPredictionTask`   |
| `models`   | æä¾›æ¨¡å‹ç»“æ„ï¼ˆLSTMã€GRU-Dã€RETAIN ç­‰ï¼‰                     | `GRUD`, `RETAIN`         |
| `trainer`  | å°è£…è®­ç»ƒæµç¨‹ï¼ŒåŒ…å« Early Stoppingã€è¯„ä¼°ã€ä¿å­˜                  | `Trainer(model).train()` |
| `metrics`  | æä¾›è¯„ä¼°æŒ‡æ ‡ï¼ˆAUCã€F1ã€Accuracyã€DDI rateï¼‰                | `trainer.evaluate()`     |

---

## ğŸš€ 1.3 ä¸‹è½½å¹¶è¿è¡Œå®˜æ–¹ç¤ºä¾‹ä»£ç 

### Step 1: å…‹éš†å®˜æ–¹ä»“åº“

```bash
git clone https://github.com/sunlabuiuc/pyhealth.git
cd pyhealth/examples
```

### Step 2: è¿è¡Œæ¨èç¤ºä¾‹è„šæœ¬

#### âœ… æ¨èè„šæœ¬ 1ï¼šæ­»äº¡é¢„æµ‹ï¼ˆGRU-D æ¨¡å‹ï¼‰

```bash
python mortality_prediction_grud.py
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
Train AUC: 0.89 | Test AUC: 0.84
Best model saved to: checkpoints/mortality_prediction_grud.pth
```

#### âœ… æ¨èè„šæœ¬ 2ï¼šå®éªŒå®¤é¢„æµ‹ï¼ˆTransformer æ¨¡å‹ï¼‰

```bash
python lab_prediction_transformer.py
```

---

## ğŸ” 1.4 è½½å…¥è¿œç¨‹åˆæˆ MIMIC-III æ•°æ®éªŒè¯æ•°æ®æµ

### ç¤ºä¾‹ä»£ç ï¼ˆåœ¨ Jupyter Notebook æˆ–è„šæœ¬ä¸­è¿è¡Œï¼‰ï¼š

```python
from pyhealth.datasets import MIMIC3Dataset

mimic3 = MIMIC3Dataset(
    root="https://storage.googleapis.com/pyhealth/Synthetic_MIMIC-III/",
    tables=["LABEVENTS", "DIAGNOSES_ICD"]
)

mimic3.stat()  # æŸ¥çœ‹æ•°æ®é›†ä¿¡æ¯
patient = mimic3.patients[0]
print(patient.patient_id, len(patient.visits))
```

---

## ğŸ“˜ é˜¶æ®µç»ƒä¹ å»ºè®®

æ–°å»ºä¸€ä¸ª Jupyter Notebook æ–‡ä»¶ `01_env_and_intro.ipynb`ï¼Œå®Œæˆä»¥ä¸‹å†…å®¹ï¼š

* âœ… å®‰è£…ä¾èµ–å¹¶å¯¼å…¥ PyHealthï¼›
* âœ… è¿è¡Œä¸€ä¸ªç¤ºä¾‹è„šæœ¬ï¼›
* âœ… åŠ è½½ Synthetic MIMIC å¹¶æŸ¥çœ‹æ ·æœ¬ç—…äººï¼›
* âœ… å†™ä¸€ä¸ªå‡½æ•°ç»Ÿè®¡æŸç±»åŒ–éªŒï¼ˆå¦‚ creatinineï¼‰å‡ºç°çš„é¢‘ç‡ã€‚

---

## ğŸ“‚ æ¨èé¡¹ç›®ç»“æ„

```
pyhealth_project/
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ 01_env_and_intro.ipynb     âœ… ç¯å¢ƒæµ‹è¯•ä¸æ•°æ®åŠ è½½æ¼”ç¤º
â”œâ”€â”€ examples/                      âœ… å¯å¤åˆ¶è‡ªå®˜æ–¹ pyhealth/examples
â”œâ”€â”€ checkpoints/                   âœ… å­˜å‚¨æ¨¡å‹æ–‡ä»¶
â””â”€â”€ README.md                      âœ… ç®€è¦è®°å½•é˜¶æ®µç›®æ ‡ä¸å®Œæˆæƒ…å†µ
```

---

## âœ… é˜¶æ®µè¾¾æˆæ ‡å‡†æ£€æŸ¥è¡¨

| æ£€æŸ¥ç‚¹                            | çŠ¶æ€ |
| ------------------------------ | -- |
| æˆåŠŸå®‰è£… PyHealth ä¸ PyTorch        | âœ…  |
| æˆåŠŸè¿è¡Œä¸€ä¸ªç¤ºä¾‹è„šæœ¬ï¼ˆå¦‚ GRU-D æ­»äº¡é¢„æµ‹ï¼‰       | âœ…  |
| èƒ½è¯»å– Synthetic MIMIC æ•°æ®é›†å¹¶æ‰“å°æ‚£è€…ä¿¡æ¯ | âœ…  |
| å†™å‡ºç®€å•æ•°æ®ç»Ÿè®¡é€»è¾‘å‡½æ•°                   | âœ…  |

---

## ğŸ“Œ é™„åŠ èµ„æºæ¨è

* [PyHealth æ–‡æ¡£](https://pyhealth.readthedocs.io/)
* [å®˜æ–¹ GitHub ç¤ºä¾‹](https://github.com/sunlabuiuc/pyhealth/tree/main/examples)
* [Synthetic MIMIC æ•°æ®è¯´æ˜](https://storage.googleapis.com/pyhealth/Synthetic_MIMIC-III/README.txt)

---

æ˜¯å¦ç»§ç»­è¿›å…¥ç¬¬äºŒé˜¶æ®µã€Œæ•°æ®å‡†å¤‡ä¸è½¬æ¢ï¼ˆMIMIC-AKIåœºæ™¯ï¼‰ã€çš„å®æ“å­¦ä¹ è®¡åˆ’ï¼Ÿæˆ‘å°†ä¸ºä½ ç”Ÿæˆä¸€ä»½å®Œæ•´çš„ï¼š
âœ… ä» MIMIC æå–ç‰¹å®šå®éªŒå®¤æŒ‡æ ‡
âœ… æ„é€  AKI æ ‡ç­¾
âœ… å°è£…æˆ `SampleBaseDataset` çš„å…¨è¿‡ç¨‹ä»£ç æ¨¡æ¿ã€‚

æ˜¯å¦ç»§ç»­ï¼Ÿ
