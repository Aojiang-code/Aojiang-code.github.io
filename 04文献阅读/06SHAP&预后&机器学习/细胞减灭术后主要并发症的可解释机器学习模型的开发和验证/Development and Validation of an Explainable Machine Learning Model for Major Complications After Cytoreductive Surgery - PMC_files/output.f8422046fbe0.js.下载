(function($){$.fn.ncbiclearbutton=function(){var validInputs=['INPUT'];return this.each(function(){if(navigator.userAgent.match(/Trident.*rv[ :]*11\./)||navigator.appVersion.indexOf("MSIE 10")>-1){return;}
if(validInputs.indexOf(this.tagName)===-1){throw('Clear button can only be added to '+validInputs.join(', '));}
var $wrapper=$('<div class="ncbi-clear-button-wrapper"></div>');var $xButton=$('<button class="ncbi-clear-button-x" type="button"><span class="fa fa-times"></span><span class="usa-sr-only">Clear</span></button>');var $textbox=$(this);if($textbox.closest('.usa-search').length){$wrapper=$textbox.closest('.usa-search');initializeClearButton($xButton,$textbox,$wrapper);$xButton.insertAfter($textbox);}else{$wrapper.css({'width':$textbox.width()+'px','height':$textbox.height()+'px'});initializeClearButton($xButton,$textbox,$wrapper);$textbox.wrap($wrapper);$xButton.insertAfter($textbox);}});function initializeClearButton($xButton,$textbox){var textboxId=$textbox.attr('id');if(typeof textboxId==='undefined'||textboxId===''){throw('Cannot initialize ncbiclearbutton. Textbox has no id');}
$xButton.attr('aria-controls',textboxId);$xButton.click(function(e){$textbox.focus().val('');toggleClearButtonVisibility($(this),$textbox);e.preventDefault();e.stopPropagation();});$textbox.on('keydown keyup change',function(){toggleClearButtonVisibility($xButton,$textbox);});toggleClearButtonVisibility($xButton,$textbox);}
function toggleClearButtonVisibility($xButton,$textbox){if($textbox.val()!==''){$xButton.attr('aria-hidden',false);$xButton.show();var w=parseInt($xButton.css('width'))||40;$textbox.css('padding-right',w+'px');}else{$xButton.attr('aria-hidden',true);$xButton.hide();}}};$(document).ready(function($){$('[data-clear-button=true]').ncbiclearbutton();});})(jQuery);;