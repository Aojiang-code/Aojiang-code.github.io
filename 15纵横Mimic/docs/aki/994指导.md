é‚£å°±å¼€æå‰ç«¯ ğŸ¯
æŒ‰ç…§ä½ è¯´çš„æ€è·¯ï¼š**å…ˆè·‘é€šï¼Œå†ç¾åŒ–**ï¼Œæˆ‘ç»™ä½ ä¸€å¥—å°½é‡â€œå‚»ç“œå¼â€çš„æ–¹æ¡ˆâ€”â€”åªç”¨ä¸€ä¸ª HTML æ–‡ä»¶ + EChartsï¼Œå°±èƒ½æŠŠ AKI çš„å‡ ä¸ªæ ¸å¿ƒç»“æœå±•ç¤ºå‡ºæ¥ã€‚

ä¸‹é¢è¿™ä¸€æ­¥æ˜¯ä¸€ä¸ª **æœ€å°å¯è¿è¡Œç‰ˆæœ¬ï¼ˆMVPï¼‰**ï¼Œä½ åªè¦æŠŠ JSON æ”¾å¥½ã€HTML æ”¾å¥½ï¼Œç”¨æµè§ˆå™¨æ‰“å¼€å°±èƒ½çœ‹åˆ°å›¾ã€‚

---

## ä¸€ã€å‰ç«¯æœ€å°ç›®å½•ç»“æ„

å…ˆåœ¨é¡¹ç›®é‡Œå»ºä¸€ä¸ªç®€å•çš„ `frontend/` ç›®å½•ï¼Œä¾‹å¦‚ï¼š

```text
frontend/
  aki.html
  data/
    aki/
      aki_basic_stats.json
      aki_age_distribution.json
      aki_gender_distribution.json
      aki_mortality.json
```

> æŠŠä½ åœ¨ `backend/outputs/aki/` ç”Ÿæˆçš„é‚£å‡ ä¸ª JSON å¤åˆ¶åˆ°
> `frontend/data/aki/` ä¸‹å³å¯ï¼ˆåé¢å¯ä»¥ç”¨è„šæœ¬è‡ªåŠ¨åŒæ­¥ï¼Œç°åœ¨æ‰‹åŠ¨å°±å¥½ï¼‰ã€‚

---

## äºŒã€ä¸€ä¸ªèƒ½ç›´æ¥ç”¨çš„ `aki.html`ï¼ˆå« JSã€å« EChartsï¼‰

ä¸‹é¢æ˜¯ä¸€ä»½**å¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´**çš„ `frontend/aki.html`ï¼Œ
ä½ åªè¦æ”¹ä¸€ä¸‹ `<title>` ä¹‹ç±»çš„å°åœ°æ–¹å°±è¡Œã€‚

```html
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>AKI in ICU - MIMIC-IV æè¿°æ€§åˆ†æ</title>
  <!-- å¼•å…¥ ECharts CDN -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;
    }
    header {
      background-color: #1f2933;
      color: #ffffff;
      padding: 16px 24px;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
    }
    header p {
      margin: 4px 0 0;
      font-size: 14px;
      opacity: 0.9;
    }
    main {
      max-width: 1100px;
      margin: 16px auto 40px;
      padding: 0 16px;
    }
    .cards {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 20px;
    }
    .card {
      background-color: #ffffff;
      border-radius: 8px;
      padding: 12px 14px;
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.1);
      flex: 1 1 180px;
      min-width: 180px;
    }
    .card-title {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 6px;
    }
    .card-value {
      font-size: 20px;
      font-weight: 600;
      color: #111827;
    }
    .section {
      margin-top: 24px;
    }
    .section h2 {
      font-size: 18px;
      margin-bottom: 8px;
      color: #111827;
    }
    .section p {
      font-size: 13px;
      color: #6b7280;
      margin: 0 0 8px;
    }
    .chart-container {
      background-color: #ffffff;
      border-radius: 8px;
      padding: 10px;
      box-shadow: 0 1px 3px rgba(15, 23, 42, 0.1);
      margin-top: 8px;
    }
    .chart-box {
      width: 100%;
      height: 320px;
    }
    footer {
      text-align: center;
      font-size: 12px;
      color: #9ca3af;
      padding: 12px 0 18px;
    }
    .error {
      color: #b91c1c;
      font-size: 13px;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <header>
    <h1>æ€¥æ€§è‚¾æŸä¼¤ï¼ˆAKIï¼‰ - ICU æ‚£è€…æ¦‚è§ˆï¼ˆMIMIC-IVï¼‰</h1>
    <p>æœ¬é¡µå±•ç¤ºåŸºäº MIMIC-IV çš„ AKI ICU äººç¾¤æè¿°æ€§ç»“æœï¼ˆæ•™å­¦ç”¨é€”ï¼Œéä¸´åºŠå†³ç­–ä¾æ®ï¼‰ã€‚</p>
  </header>

  <main>
    <!-- æ¦‚è§ˆå¡ç‰‡ -->
    <section class="section">
      <h2>é˜Ÿåˆ—æ¦‚è§ˆ</h2>
      <p>å±•ç¤º AKI ICU é˜Ÿåˆ—çš„æ ·æœ¬é‡ã€å¹´é¾„ã€ä¸­ä½ä½é™¢æ—¶é—´åŠæ­»äº¡ç‡ã€‚</p>
      <div class="cards" id="summary-cards">
        <div class="card">
          <div class="card-title">æ ·æœ¬é‡</div>
          <div class="card-value" id="card-n">--</div>
        </div>
        <div class="card">
          <div class="card-title">å¹´é¾„ï¼ˆä¸­ä½æ•°ï¼‰</div>
          <div class="card-value" id="card-age-median">--</div>
        </div>
        <div class="card">
          <div class="card-title">ICU æ­»äº¡ç‡</div>
          <div class="card-value" id="card-icu-mortality">--</div>
        </div>
        <div class="card">
          <div class="card-title">ä½é™¢æ­»äº¡ç‡</div>
          <div class="card-value" id="card-hosp-mortality">--</div>
        </div>
      </div>
      <div id="summary-error" class="error" style="display:none;"></div>
    </section>

    <!-- å¹´é¾„åˆ†å¸ƒ -->
    <section class="section">
      <h2>å¹´é¾„åˆ†å¸ƒ</h2>
      <p>æŒ‰å¹´é¾„åˆ†ç»„å±•ç¤º AKI æ‚£è€…çš„æ•°é‡ï¼Œåæ˜ å¹´é¾„ç»“æ„ã€‚</p>
      <div class="chart-container">
        <div id="chart-age" class="chart-box"></div>
      </div>
      <div id="age-error" class="error" style="display:none;"></div>
    </section>

    <!-- æ€§åˆ«åˆ†å¸ƒ -->
    <section class="section">
      <h2>æ€§åˆ«åˆ†å¸ƒ</h2>
      <p>å±•ç¤º AKI ICU æ‚£è€…çš„æ€§åˆ«æ¯”ä¾‹ã€‚</p>
      <div class="chart-container">
        <div id="chart-gender" class="chart-box"></div>
      </div>
      <div id="gender-error" class="error" style="display:none;"></div>
    </section>

    <!-- æ­»äº¡ç‡ -->
    <section class="section">
      <h2>çŸ­æœŸç»“å±€ï¼šæ­»äº¡ç‡</h2>
      <p>å±•ç¤º ICU ä¸ä½é™¢æ­»äº¡ç‡ã€‚</p>
      <div class="chart-container">
        <div id="chart-mortality" class="chart-box"></div>
      </div>
      <div id="mortality-error" class="error" style="display:none;"></div>
    </section>
  </main>

  <footer>
    æ•°æ®æ¥æºï¼šMIMIC-IVï¼ˆæ•™å­¦æ¼”ç¤ºç”¨ï¼‰ Â· ä»…å±•ç¤ºæ±‡æ€»ç»Ÿè®¡ï¼Œä¸åŒ…å«ä¸ªä½“æ‚£è€…ä¿¡æ¯
  </footer>

  <script>
    async function fetchJson(path, errorElementId) {
      try {
        const res = await fetch(path);
        if (!res.ok) {
          throw new Error('HTTP ' + res.status);
        }
        return await res.json();
      } catch (err) {
        console.error('Fetch error for', path, err);
        const errEl = document.getElementById(errorElementId);
        if (errEl) {
          errEl.style.display = 'block';
          errEl.textContent = 'åŠ è½½æ•°æ®å¤±è´¥ï¼š' + path + 'ï¼ˆ' + err.message + 'ï¼‰';
        }
        return null;
      }
    }

    function renderSummaryCards(stats) {
      if (!stats) return;
      document.getElementById('card-n').textContent = stats.n?.toLocaleString() ?? '--';

      const ageMedian = stats.age_median;
      document.getElementById('card-age-median').textContent =
        (typeof ageMedian === 'number') ? ageMedian.toFixed(1) + ' å²' : '--';

      const icuRate = stats.icu_mortality_rate;
      document.getElementById('card-icu-mortality').textContent =
        (typeof icuRate === 'number') ? (icuRate * 100).toFixed(1) + '%' : '--';

      const hospRate = stats.hosp_mortality_rate;
      document.getElementById('card-hosp-mortality').textContent =
        (typeof hospRate === 'number') ? (hospRate * 100).toFixed(1) + '%' : '--';
    }

    function renderAgeChart(data) {
      if (!data) return;
      const dom = document.getElementById('chart-age');
      const chart = echarts.init(dom);

      const option = {
        tooltip: { trigger: 'axis' },
        xAxis: {
          type: 'category',
          data: data.age_groups,
          axisLabel: { rotate: 0 }
        },
        yAxis: {
          type: 'value',
          name: 'äººæ•°'
        },
        series: [
          {
            type: 'bar',
            data: data.counts
          }
        ]
      };
      chart.setOption(option);
      window.addEventListener('resize', () => chart.resize());
    }

    function renderGenderChart(data) {
      if (!data) return;
      const dom = document.getElementById('chart-gender');
      const chart = echarts.init(dom);

      const seriesData = data.display_categories.map((name, i) => ({
        name,
        value: data.counts[i]
      }));

      const option = {
        tooltip: { trigger: 'item' },
        legend: { orient: 'horizontal', bottom: 0 },
        series: [
          {
            type: 'pie',
            radius: '60%',
            center: ['50%', '45%'],
            data: seriesData
          }
        ]
      };
      chart.setOption(option);
      window.addEventListener('resize', () => chart.resize());
    }

    function renderMortalityChart(data) {
      if (!data) return;
      const dom = document.getElementById('chart-mortality');
      const chart = echarts.init(dom);

      const labels = data.display_outcomes;
      const ratesPercent = data.rates.map(r => r * 100);

      const option = {
        tooltip: { trigger: 'axis', formatter: '{b}: {c}%' },
        xAxis: {
          type: 'category',
          data: labels
        },
        yAxis: {
          type: 'value',
          name: 'æ­»äº¡ç‡(%)'
        },
        series: [
          {
            type: 'bar',
            data: ratesPercent
          }
        ]
      };
      chart.setOption(option);
      window.addEventListener('resize', () => chart.resize());
    }

    async function initPage() {
      // è·¯å¾„æ˜¯ç›¸å¯¹äº aki.html çš„ä½ç½®ï¼šfrontend/aki.html -> frontend/data/aki/xxx
      const [
        stats,
        ageDist,
        genderDist,
        mortDist
      ] = await Promise.all([
        fetchJson('data/aki/aki_basic_stats.json', 'summary-error'),
        fetchJson('data/aki/aki_age_distribution.json', 'age-error'),
        fetchJson('data/aki/aki_gender_distribution.json', 'gender-error'),
        fetchJson('data/aki/aki_mortality.json', 'mortality-error')
      ]);

      renderSummaryCards(stats);
      renderAgeChart(ageDist);
      renderGenderChart(genderDist);
      renderMortalityChart(mortDist);
    }

    document.addEventListener('DOMContentLoaded', initPage);
  </script>
</body>
</html>
```

---

## ä¸‰ã€å¦‚ä½•å¿«é€ŸéªŒè¯â€œAKI å‰ç«¯å·²ç»è·‘é€šâ€

1. **ç¡®è®¤ JSON åœ¨æ­£ç¡®ä½ç½®**

   * `frontend/data/aki/aki_basic_stats.json`
   * `frontend/data/aki/aki_age_distribution.json`
   * `frontend/data/aki/aki_gender_distribution.json`
   * `frontend/data/aki/aki_mortality.json`

2. ç¡®è®¤ `aki.html` è·Ÿ `data/` åœ¨åŒä¸€å±‚ï¼š

   ```text
   frontend/
     aki.html
     data/
       aki/
         ...
   ```

3. åœ¨æœ¬åœ°éšä¾¿å¯ä¸€ä¸ªé™æ€æœåŠ¡å™¨ï¼ˆå»ºè®®ä¸è¦ç›´æ¥ç”¨ `file://` æ‰“å¼€ï¼Œæœ‰æ—¶ä¼šæœ‰ CORS/æƒé™é—®é¢˜ï¼‰ï¼š

   ç¤ºä¾‹ï¼ˆå¦‚æœä½ æœ‰ Pythonï¼‰ï¼š

   ```bash
   cd frontend
   python -m http.server 8000
   ```

   ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ï¼š
   `http://localhost:8000/aki.html`

4. å¦‚æœ JSON è·¯å¾„æˆ–ç»“æ„æœ‰é—®é¢˜ï¼Œä½ ä¼šåœ¨é¡µé¢ä¸Šçœ‹åˆ°çº¢è‰²é”™è¯¯æç¤ºï¼ˆæ¯”å¦‚â€œåŠ è½½æ•°æ®å¤±è´¥â€¦â€ï¼‰ï¼ŒåŒæ—¶æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰ä¹Ÿä¼šæœ‰æ—¥å¿—ã€‚

---

## æ¥ä¸‹æ¥å¯ä»¥æ€ä¹ˆåšï¼Ÿ

ç­‰ä½ æŠŠè¿™ä¸€æ­¥è·‘é€šä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ï¼š

* å†åŠ ä¸€ä¸ªå°åŒºåŸŸï¼š**â€œæŸ¥çœ‹åˆ†æä»£ç â€**ï¼Œé“¾æ¥åˆ° GitHub çš„ Python æ–‡ä»¶ï¼›
* æˆ–è€…åœ¨è¿™ä¸ªé¡µé¢ä¸‹é¢åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œ**ä¸‹è½½ `aki_table1_overall.csv`**ï¼›
* ä¹‹åå¦‚æœä½ æƒ³ç”¨ Next.js / React å†é‡æ„ï¼Œå°±å¾ˆç®€å•ï¼š
  ç›´æ¥æŠŠè¿™é‡Œçš„ JS é€»è¾‘â€œæ¬â€åˆ°ä¸€ä¸ª React ç»„ä»¶é‡Œå³å¯ã€‚

ä½ å¯ä»¥å…ˆæŒ‰è¿™ä¸ªæ–‡ä»¶è¯•è·‘ä¸€ä¸‹ï¼š
å¦‚æœé‡åˆ°ä»»ä½•æŠ¥é”™ï¼ˆè·¯å¾„ã€JSONã€å›¾è¡¨ä¸æ˜¾ç¤ºï¼‰ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯/æˆªå›¾æˆ–æµè§ˆå™¨ console é‡Œçš„å†…å®¹è´´ç»™æˆ‘ï¼Œæˆ‘é™ªä½ ä¸€èµ· debugã€‚
